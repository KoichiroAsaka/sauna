<div class="container mt-5 sauna-show">
  <!-- üîπ „Çµ„Ç¶„ÉäÊÉÖÂ†±„Ç´„Éº„Éâ -->
  <div class="card sauna-info-card shadow-lg mb-5 text-center">
    <div class="card-body">
      <h2 class="fw-bold mb-3 sauna-title"><%= @sauna.name %></h2>
      <p class="mb-3 sauna-address"><i class="bi bi-geo-alt"></i> <%= @sauna.address %></p>

      <!-- „ÅäÊ∞ó„Å´ÂÖ•„ÇäÁôªÈå≤ÔºèËß£Èô§„Éú„Çø„É≥ -->
      <div class="mb-3">
        <% if current_user.favorites.exists?(sauna_id: @sauna.id) %>
          <%= button_to "‚òÖ „ÅäÊ∞ó„Å´ÂÖ•„ÇäËß£Èô§",
                        favorite_path(sauna_id: @sauna.id),
                        method: :delete,
                        class: "btn btn-warning w-50" %>
        <% else %>
          <%= button_to "‚òÜ „ÅäÊ∞ó„Å´ÂÖ•„ÇäÁôªÈå≤",
                        favorites_path(sauna_id: @sauna.id),
                        method: :post,
                        class: "btn btn-outline-warning w-50" %>
        <% end %>
      </div>

      <%= link_to "„Åì„ÅÆ„Çµ„Ç¶„Éä„Å´ÊäïÁ®ø„Åô„Çã", new_sauna_post_path(@sauna), class: "btn btn-primary w-50" %>
    </div>
  </div>

  <!-- üîπ ÊäïÁ®ø‰∏ÄË¶ß -->
  <h3 class="text-center mb-4 text-white">„Åì„ÅÆ„Çµ„Ç¶„Éä„ÅÆÊäïÁ®ø‰∏ÄË¶ß</h3>

  <% if @posts.any? %>
    <div class="row">
      <% @posts.each do |post| %>
        <div class="col-md-4 mb-4">
          <div class="card post-card shadow-sm h-100">
            <% if post.image.attached? %>
              <%= link_to image_tag(post.image, class: "card-img-top", style: "height: 180px; object-fit: cover;"), sauna_post_path(post.sauna, post) %>
            <% end %>

            <div class="card-body d-flex flex-column">
              <p class="text-muted small mb-2">
               <i class="bi bi-person"></i>
                <% if defined?(user_path) %>
                  <%= link_to(post.user.name.presence || post.user.email, user_path(post.user)) %>
                <% else %>
                  <%= post.user.name.presence || post.user.email %>
                <% end %>
                <% if post.user == current_user %>Ôºà„ÅÇ„Å™„ÅüÔºâ<% end %>
              </p>
              
              <div class="d-flex mb-1">
               <i class="bi bi-journal-text me-2"></i>
               <p class="flex-grow-1 mb-0">
                 <%= truncate(post.post.presence || "ÔºàÊú¨Êñá„Å™„ÅóÔºâ", length: 60) %>
               </p>
              </div>

              <ul class="list-unstyled small text-secondary mb-3">
              <li><i class="bi bi-people-fill"></i> <%= I18n.t("enums.post.congestion_level.#{post.congestion_level}") if post.congestion_level.present? %>
              <li><i class="bi bi-calendar-event"></i> <%= I18n.t("enums.post.day_of_week.#{post.day_of_week}") if post.day_of_week.present? %>
              <li><i class="bi bi-clock"></i> <%= I18n.t("enums.post.time_zone.#{post.time_zone}") if post.time_zone.present? %>
              </ul>

              <%= link_to "Ë©≥Á¥∞„ÇíË¶ã„Çã", sauna_post_path(post.sauna, post), class: "btn btn-outline-primary btn-sm mt-auto w-100" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <div class="d-flex justify-content-center mt-4 mb-5">
      <%= paginate @posts %>
    </div>
  <% else %>
    <p class="text-center text-light mt-5">„Åæ„Å†ÊäïÁ®ø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
  <% end %>
</div>
