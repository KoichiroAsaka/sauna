<div class="profile-sauna-container mt-5">
  <div class="profile-sauna-card p-4 text-center">

    <!-- セクションタイトル -->
    <h2 class="sauna-title mb-4">プロフィール</h2>

    <!-- プロフィール画像 -->
    <div class="d-flex flex-column align-items-center mb-3">
      <% if @user.profile_image.attached? %>
        <%= image_tag url_for(@user.profile_image),
                      class: "sauna-avatar",
                      width: 120, height: 120 %>
      <% else %>
        <%= image_tag "default-avatar.png",
                      class: "sauna-avatar",
                      width: 120, height: 120 %>
        <p class="text-muted mb-0 sauna-muted"></p>
      <% end %>
    </div>

    <!-- 名前 -->
    <h4 class="sauna-heading mt-3 mb-2">名前</h4>
    <p class="sauna-text"><%= @user.name.presence || "名前未設定" %></p>

    <!-- 自己紹介 -->
    <h4 class="sauna-heading mt-3 mb-2">自己紹介</h4>
    <p class="sauna-text"><%= @user.profile.presence || "自己紹介がまだありません。" %></p>

    <!-- 投稿一覧 -->
    <%= link_to "#{@user.name} さんの投稿一覧",
                posts_user_path(@user),
                class: "btn sauna-btn-outline mt-3" %>

    <!-- フォロー関連（他ユーザーのみ） -->
    <% if current_user != @user %>
      <% if current_user.following?(@user) %>
        <%= button_to "フォロー解除",
                      relationship_path(user_id: @user.id),
                      method: :delete,
                      class: "btn sauna-btn-danger w-100 mt-3" %>
      <% else %>
        <%= button_to "フォローする",
                      relationships_path(user_id: @user.id),
                      method: :post,
                      class: "btn sauna-btn-outline w-100 mt-3" %>
      <% end %>
    <% end %>

    <!-- 本人のみ：編集・削除 -->
    <% if @user == current_user %>
      <%= link_to "プロフィールを編集",
                  edit_profile_user_path(@user),
                  class: "btn sauna-btn w-100 mt-4" %>

      <%= link_to "プロフィールを削除",
                  profile_user_path(@user),
                  method: :delete,
                  data: { confirm: "本当に削除しますか？" },
                  class: "btn sauna-btn-danger w-100 mt-3" %>
    <% end %>

  </div>
</div>
