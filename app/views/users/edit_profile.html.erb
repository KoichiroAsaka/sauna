<div class="container mt-5">
  <div class="card p-4 shadow">
    <h3 class="text-center mb-4">プロフィール編集</h3>

    <%= form_with model: @user, url: profile_user_path(@user), local: true, method: :patch do |form| %>
      <div class="mb-3 text-center">
        <% if @user.profile_image.attached? %>
          <%= image_tag url_for(@user.profile_image),
                        class: "rounded-circle mb-2 shadow-sm",
                        width: 120, height: 120 %>
        <% else %>
          <%= image_tag "default-avatar.png",
                        class: "rounded-circle mb-2 shadow-sm",
                        width: 120, height: 120 %>
          <p class="text-muted mb-0">※アイコン未登録</p>
        <% end %>
      </div>

      <div class="mb-3">
        <%= form.label :profile_image, "アイコン画像" %>
        <%= form.file_field :profile_image, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :name, "名前" %>
        <%= form.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :profile, "自己紹介" %>
        <%= form.text_area :profile, class: "form-control", rows: 4 %>
      </div>

      <%= form.submit "更新する", class: "btn btn-success w-100" %>
    <% end %>

    <!-- ✅ プロフィールページに戻るボタン -->
    <div class="text-center mt-3">
      <%= link_to "プロフィールに戻る", profile_user_path(current_user), class: "btn btn-outline-secondary" %>
    </div>
  </div>
</div>
