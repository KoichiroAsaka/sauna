<!-- app/views/users/edit_profile.html.erb -->

<div class="container mt-5">
  <div class="card p-4 shadow">
    <h3 class="text-center mb-4">プロフィール編集</h3>

    <%= form_with model: @user, url: profile_user_path(@user), local: true, method: :patch do |form| %>
      <div class="mb-3 text-center">
        <% if @user.profile_image.attached? %>
          <%= image_tag @user.profile_image.variant(resize_to_fill: [120, 120]), class: "rounded-circle mb-3" %>
        <% else %>
          <%= image_tag "default-avatar.png", class: "rounded-circle mb-3", width: 120, height: 120 %>
        <% end %>
      </div>

      <div class="mb-3">
        <%= form.label :profile_image, "アイコン画像" %>
        <%= form.file_field :profile_image, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :name, "名前" %>
        <%= form.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :profile, "自己紹介" %>
        <%= form.text_area :profile, class: "form-control", rows: 4 %>
      </div>

      <%= form.submit "更新する", class: "btn btn-success w-100" %>
    <% end %>
  </div>
</div>
