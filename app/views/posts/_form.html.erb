<div class="post-form">
  <div class="card p-4 shadow">
    <h2 class="text-center mb-4">
      <%= post.persisted? ? "投稿を編集" : "新規投稿" %>
    </h2>

    <%= form_with model: [post.sauna, post], local: true do |form| %>
      <!-- ✅ 対象サウナ -->
      <div class="mb-3">
        <%= form.label :sauna_id, "対象サウナ", class: "form-label" %>
        <%= form.collection_select :sauna_id, Sauna.all, :id, :name,
              prompt: "サウナを選択",
              class: "form-select" %>
      </div>

      <!-- ✅ 投稿内容 -->
      <div class="mb-3">
        <%= form.label :post, "投稿内容", class: "form-label" %>
        <%= form.text_area :post, rows: 4, class: "form-control" %>
      </div>

      <!-- ✅ 混雑度 -->
      <div class="mb-3">
        <%= form.label :congestion_level, "混雑度（★）", class: "form-label" %>
        <%= form.select :congestion_level,
              Post.congestion_levels.keys.map { |k| [I18n.t("enums.post.congestion_level.#{k}"), k] },
              prompt: "選択してください",
              class: "form-select" %>
      </div>

      <!-- ✅ 曜日 -->
      <div class="mb-3">
        <%= form.label :day_of_week, "曜日", class: "form-label" %>
        <%= form.select :day_of_week,
              Post.day_of_weeks.keys.map { |k| [I18n.t("enums.post.day_of_week.#{k}"), k] },
              prompt: "選択してください",
              class: "form-select" %>
      </div>

      <!-- ✅ 時間帯 -->
      <div class="mb-3">
        <%= form.label :time_zone, "時間帯", class: "form-label" %>
        <%= form.select :time_zone,
              Post.time_zones.keys.map { |k| [I18n.t("enums.post.time_zone.#{k}"), k] },
              prompt: "選択してください",
              class: "form-select" %>
      </div>

      <!-- ✅ 画像アップロード -->
      <div class="mb-3">
        <%= form.label :image, "画像アップロード", class: "form-label" %>
        <%= form.file_field :image, accept: "image/*", class: "form-control" %>
      </div>

      <!-- ✅ ボタン -->
      <div class="text-center mt-4">
        <% if post.persisted? %>
          <!-- 編集画面 -->
          <div class="d-flex justify-content-between">
            <%= form.submit "公開する", class: "btn btn-primary w-50 me-2" %>
            <%= form.submit "下書き保存", name: "draft", class: "btn btn-secondary w-50" %>
          </div>
        <% else %>
          <!-- 新規投稿画面 -->
          <div class="d-flex justify-content-center gap-3">
            <%= form.submit "下書き保存", name: "draft", class: "btn btn-secondary w-50" %>
            <%= form.submit "投稿する", class: "btn btn-primary w-50" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
